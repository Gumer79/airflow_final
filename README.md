# airflow_final

Проект состоит из трех частей:

- Сбора и хранения данных.
- Их преобразование.
- Анализ в Metabase.

Сбор и преобразование осуществляется в автоматическом режиме в Airflow. Более детально даги можно посмотреть по ссылке:

http://45.137.67.39:8080
User: Guest
Password : Guest

Ссылка на Дашборд: http://bit.ly/3Vc4jZ8

Сбор данных осуществляется с помощью библиотек Selenium и beautifulsoup4 c сайта Авито по г. Москва.

Для хранения развернута БД PostgreSQL.

При анализе данных хотелось посмотреть на основные показатели в разрезе по дате публикации и по производителю машин, а при парсинге данные были преобразованы минимально. Поэтому были созданы даги dag_corr_publ_date и dag_add_car_brand которые добавляют колонки с корректной датой публикации объявления и производителем машины.

Так же данные были кластеризованы методом K-средних. Кластеризация осуществляется в Airflow к которой через коннектор подключен к FastAPI и к которой отправляет POST запрос и затем сохраняет предсказанный класс объявлений. В даге dag_predict_classes можно посмотреть более подробно.

Все основные компоненты проекта упакованы в Docker контейнеры.

PS: в FastAPi также реализована предсказание цены машины. На данный момент ее функционал нигде не применен. Да и с точностью предсказания я не очень доволен. Планирую предсказание цены машины улучить и сделать удобный функционал с помощью телеграм бота.
